version: 1
doc: tjpb_certidao
fields:
  PROCESSO_ADMINISTRATIVO:
    sources:
      - band: front_head
        nlp_labels: [CNJ_PARTIAL]
        regex:
          - pattern: '(?i)p\s*r\s*o\s*c\s*e\s*s\s*s\s*o\s*a\s*d\s*m\s*i\s*n\s*i\s*s\s*t\s*r\s*a\s*t\s*i\s*v\s*o\s*(?:n[ºo°]?|nº)?\s*[:\-]?\s*([0-9][0-9\./\-]{5,30})'
            group: 1
          - pattern: '(?i)p\s*r\s*o\s*c\s*e\s*s\s*s\s*o\s*(?:a\s*d\s*m\s*i\s*n\s*i\s*s\s*t\s*r\s*a\s*t\s*i\s*v\s*o\s*)?(?:n[ºo°]?|nº)?\s*[:\-]?\s*([0-9]{4}\.[0-9]{3}\.[0-9]{3}|[0-9]{10,20})'
            group: 1
          - pattern: '(?i)processo\s*(?:administrativo|adme|ci|sei)\s*(?:n[ºo]?|nº)?\s*[:\-]?\s*([0-9\./\-]{6,25})'
            group: 1
          - pattern: '(?i)processo\s*administrativo[\s\S]{0,40}?([0-9]{6,7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}(?:\.[0-9]{4})?)'
            group: 1
          - pattern: '(?i)processo\s*n[ºo]?\s*([0-9]{6,7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}(?:\.[0-9]{4})?)'
            group: 1
          - pattern: '(?i)SEI\s*([0-9]{6,7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}(?:\.[0-9]{4})?)'
            group: 1
  PROCESSO_JUDICIAL:
    sources:
      - band: front_head
        nlp_labels: [CNJ]
        regex:
          - pattern: '(?i)processo\s*(?:judicial|n[ºo]?|proc\.?)[\s:,-]*([0-9]{7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}\.[0-9]{4})'
            group: 1
          - pattern: '(?i)a[cç][aã]o\s*n[ºo]?\s*([0-9]{7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}\.[0-9]{4})'
            group: 1
          - pattern: '(?i)autos\s+do\s+processo\s*n[ºo]?\s*([0-9]{7}-[0-9]{2}\.[0-9]{4}\.[0-9]\.[0-9]{2}\.[0-9]{4})'
            group: 1
          - pattern: '(?i)processo\s*(?:judicial|n[ºo]?|proc\.?)[\s:,-]*([0-9\.\-\/]{15,25})'
            group: 1
          - pattern: '(?i)n[ºo]?\s*[:\-]?\s*([0-9]{7}-?[0-9]{2}\.?[0-9]{4}\.?[0-9]{1}\.?[0-9]{2}\.?[0-9]{4})'
            group: 1
  COMARCA:
    sources:
      - band: front_head
        regex:
          - pattern: '(?i)comarca\s+da\s+capital'
            group: 0
          - pattern: '(?i)comarca\s+(?:da|de)\s+([\p{L}\s]+?)(?=\s*(?:,|\.|$|\s+interessad|\s+requerente|\s+ju[ií]zo|\s+vara))'
            group: 1
  VARA:
    sources:
      - band: front_head
        regex:
          - pattern: '(?i)ju\p{L}zo\s+da\s+(.+?)(?=,\s*comarca|\s+da\s+comarca|\s+comarca|\s+interessad|\s*$)'
            group: 1
          - pattern: '(?i)ju\p{L}zo\s+do\s+(.+?)(?=,\s*comarca|\s+da\s+comarca|\s+comarca|\s+interessad|\s*$)'
            group: 1
          - pattern: '(?i)(\d+\s*a?\s*vara[^\n]{0,80}?)\s+da\s+comarca\s+de\s+([\p{L}\s]+)'
            group: 1
  VALOR_ARBITRADO_CM:
    sources:
      - band: front_head
        regex:
          - pattern: '(?:autorizad[oa]|reserva\\s+or[cç]ament[aá]ria|aprovamos)[^\\n]{0,160}?pagamento[^\\n]{0,120}?honor[aá]rios[^\\n]{0,120}?R\\$\\s*([0-9]{1,3}(?:\\.[0-9]{3})*,\\d{2})'
            group: 1
          - pattern: '(?i)valor\\s+autorizad[oa][\\s\\S]{0,80}?(R\\$\\s*\\d{1,3}(?:\\.\\d{3})*,\\d{2})'
            group: 1
          - pattern: '(?i)no\\s+valor\\s+de\\s+(R\\$\\s*\\d{1,3}(?:\\.\\d{3})*,\\d{2})'
            group: 1
      - band: back_tail
        regex:
          - pattern: '(?i)valor\\s+autorizad[oa][\\s\\S]{0,80}?(R\\$\\s*\\d{1,3}(?:\\.\\d{3})*,\\d{2})'
            group: 1
  DATA_ARBITRADO_FINAL:
    sources:
      - band: back_tail
        nlp_labels: [DATA]
        regex:
          - pattern: '(?i)sala\\s+de\\s+sess[oõ]es[^\\n]{0,160}?no\\s+dia\\s+(\\d{1,2}\\s+de\\s+[a-z\\p{L}]+\\s+de\\s+\\d{4})'
            group: 1
          - pattern: '(?i)(\\d{1,2}\\s+de\\s+[a-z\\p{L}]+\\s+de\\s+\\d{4})'
            group: 1
          - pattern: '(?i)(\\d{1,2}/\\d{1,2}/\\d{2,4})'
            group: 1
  ADIANTAMENTO:
    sources:
      - band: front_head
        regex:
          - pattern: '(?i)adiantamento\\s*[:\\-]?\\s*([0-9]{1,3}(?:\\.\\d{3})*,\\d{2}|R\\$\\s*\\d{1,3}(?:\\.\\d{3})*,\\d{2})'
            group: 1
  PARCELA:
    sources:
      - band: front_head
        regex:
          - pattern: '(?i)parcela\\s*[:\\-]?\\s*([0-9]{1,3}(?:\\.\\d{3})*,\\d{2}|R\\$\\s*\\d{1,3}(?:\\.\\d{3})*,\\d{2})'
            group: 1
  PERCENTUAL:
    sources:
      - band: front_head
        regex:
          - pattern: '(?i)([0-9]{1,3}(?:,\\d{1,2})?)\\s*%'
            group: 1
